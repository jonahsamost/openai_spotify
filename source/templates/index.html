<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <!--
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Thumb Tings</title>
        <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/favicon.ico') }}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/search.css') }}" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
<!--
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav" style="background-color: rgba(255, 255, 255, 0.0);">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top"></a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="bold-menu-text">Menu</span>
                  <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        {% if current_user.is_authenticated %}
                        <div class="nav-item"><a class="nav-link">Hi, {{ current_user.name }}!</a></div>
                        {% endif %}
                        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                        {% if not current_user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
                        {% endif %}
                        <li class="nav-item"><a class="nav-link" href="#contact_us">Contact</a></li>
                        {% if current_user.is_authenticated %}
                        <div class="nav-item"><a class="nav-link" href="/logout">Logout</a></div>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

-->
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class="d-flex justify-content-center">
                    <div class="text-center">

                        {% with messages = get_flashed_messages() %}
                          {% if messages %}
                            <div class="text-center alert alert-info ", id="flashedMessage">
                              {% for message in messages %}
                                {{ message }}
                              {% endfor %}
                            </div>
                          {% endif %}
                        {% endwith %}

                        <script>
                          // Get the flashed message element by its ID
                          const flashedMessage = document.getElementById('flashedMessage');

                          // If the flashed message element exists, hide it after a few seconds
                          if (flashedMessage) {
                            // Set a timeout to hide the message after 3 seconds (3000 milliseconds)
                            setTimeout(() => {
                              flashedMessage.style.display = 'none';
                            }, 4000);
                          }
                        </script>

                        <h1 class="mx-auto my-0 text-uppercase">ThumbTings</h1>
                        <h2 class="text-white-50 mx-auto mt-2 mb-5">Your endless imagination in a playlist.</h2>
                        <form action="/spotify" method="post">
                            <div class="form-outline">
                              <!-- Give the input field a name attribute so that its value can be accessed in the Flask backend -->
                              <!-- 
                              <input type="search" id="form1" name="query" class="form-control custom-input" placeholder="Make me a playlist..." aria-label="Search"/>
                              -->

                              <textarea id="form1" name="query" rows=1 class="form-control custom-input" placeholder="Make me a playlist..." aria-label="Search" style="color: white;"></textarea>
                              <script>
                                const textarea = document.getElementById('form1');

                                const autoGrow = () => {
                                  textarea.style.height = 'auto';
                                  textarea.style.height = textarea.scrollHeight + 'px';
                                };

                                textarea.addEventListener('input', autoGrow);
                                autoGrow(); // Call autoGrow once to set the initial height
                              </script>


                              <script>
                                // Get the current URL
                                const currentUrl = new URL(window.location.href);

                                // Check if the URL has the "search" parameter
                                if (currentUrl.searchParams.has('query')) {
                                  // Get the value of the "search" parameter
                                  const searchValue = currentUrl.searchParams.get('query');

                                  // Set the value of the input element with the ID "searchInput" to the value of the "search" parameter
                                  document.getElementById('form1').value = searchValue;
                                }
                              </script>

                            </div>
                            <div class="button-container">
                                <!-- Change the anchor tag to a submit button -->
                                <button type="submit" onclick="showSpinner()" class="btn btn-primary custom-button" id="inBrowserButton" disabled>Lets Make It!</button>

                                <br>
                                <i class="fas fa-spinner fa-spin" id="spinner" style="display: none;"></i>
                                <script>
                                  function showSpinner() {
                                    // Show the spinner
                                    document.getElementById('spinner').style.display = 'inline-block';
                                  }
                                </script>
                            </div>
                            {% if playlist_url %}
                            <div class="button-container" style="margin-top: 10px;">
                                <!-- Display the message and the button if the message variable is present -->
                                <a class="btn btn-primary custom-button" href="{{ playlist_url }}">Click for your playlist!</a>
                                <script>
                                    document.getElementById('spinner').style.display = 'none';
                                </script>
                            </div>
                            {% endif %}
                        </form>
                        <a id="smsLink" class="btn btn-primary custom-button" style="margin-top: 10px;">Rather Text?</a>

                        <script>
                            function updateSmsLink() {
                                // Get the value of the query input field
                                var queryValue = document.getElementById('form1').value;
                                if (!queryValue)  queryValue = 'Make me a playlist that '
                        
                                // Construct the SMS link with the phone number and message body
                                const smsLink = 'sms:+16099084970&body=' + encodeURIComponent(queryValue);
                        
                                // Set the href attribute of the anchor element
                                document.getElementById('smsLink').href = smsLink;
                            }
                        
                            // Update the SMS link when the page loads
                            updateSmsLink();
                        
                            // Update the SMS link whenever the query input field changes
                            document.getElementById('form1').addEventListener('input', updateSmsLink);
                        </script>
<script>
    // Get the input field and buttons by their IDs
    const searchInput = document.getElementById('form1');
    const submitButton = document.getElementById('inBrowserButton');
    // const anchorButton = document.getElementById('anchorButton');

    // Function to enable or disable buttons based on input field value
    function updateButtonState() {
        const hasText = searchInput.value.trim().length > 0;
        submitButton.disabled = !hasText;
        // anchorButton.disabled = !hasText;
    }

    // Add an input event listener to the search input field
    searchInput.addEventListener('input', updateButtonState);

    // Call the function to set the initial button state
    updateButtonState();
</script>

                    </div>
                </div>
            </div>
        </header>
        <!-- About-->
        <section class="projects-section bg-light" id="about">
            <div class="container px-4 px-lg-5">
                <!-- Featured Project Row-->
                <div class="row gx-0 mb-4 mb-lg-5 align-items-center">
                    <div class="col-xl-8 col-lg-7"><img class="img-fluid mb-3 mb-lg-0" src="{{ url_for('static', filename='assets/img/bg-masthead.jpg') }}" alt="..." /></div>
                    <div class="col-xl-4 col-lg-5">
                        <div class="featured-text text-center text-lg-left">
                            <h4>Vibe out</h4>
                            <p class="text-black-50 mb-0">Create any playlist you can dream up. Whether its your perfect gym playlist, coastal cruise soundtrack or night out pregame mix! Right to your Spotify.</p>
                        </div>
                    </div>
                </div>
                <!-- Project One Row-->
                <div class="row gx-0 mb-5 mb-lg-0 justify-content-center">
                    <div class="col-lg-6"><img class="img-fluid" src="{{ url_for('static', filename='assets/img/demo-image-01.jpg') }}" alt="..." /></div>
                    <div class="col-lg-6">
                        <div class="bg-black text-center h-100 project">
                            <div class="d-flex h-100">
                                <div class="project-text w-100 my-auto text-center text-lg-left">
                                    <h4 class="text-white">Be Creative</h4>
                                    <p class="mb-0 text-white-50">Be as specific or general as you like. Name drop artists, songs or even genres. Sit back and we'll do the rest.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Project Two Row-->
                <div class="row gx-0 justify-content-center">
                    <div class="col-lg-6"><img class="img-fluid" src="{{ url_for('static', filename='assets/img/demo-image-02.jpg') }}" alt="..." /></div>
                    <div class="col-lg-6 order-lg-first">
                        <div class="bg-black text-center h-100 project">
                            <div class="d-flex h-100">
                                <div class="project-text w-100 my-auto text-center text-lg-right">
                                    <h4 class="text-white">Don't Settle</h4>
                                    <p class="mb-0 text-white-50">Find new songs, develop new tastes, for any and all occasions!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Contact-->
        <section class="contact-section bg-black", id="contact_us">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-envelope text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Email</h4>
                                <hr class="my-4 mx-auto" />
                                <div class="small text-black-50"><a href="#!">thumbtings@gmail.com</a></div>
                            </div>
                        </div>
                    </div>
<!--
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-map-marked-alt text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Address</h4>
                                <hr class="my-4 mx-auto" />
                                <div class="small text-black-50">4923 Market Street, Orlando FL</div>
                            </div>
                        </div>
                    </div>
-->
<!--
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-mobile-alt text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Phone</h4>
                                <hr class="my-4 mx-auto" />
                                <div class="small text-black-50">+1 (555) 902-8832</div>
                            </div>
                        </div>
                    </div>
-->                    
                </div>
                <div class="social d-flex justify-content-center">
                    <a class="mx-2" href="https://twitter.com/thumbtings"><i class="fab fa-twitter"></i></a>
                    <a class="mx-2" href="https://www.instagram.com/thumbtings/?hl=en"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer bg-black small text-center text-white-50"><div class="container px-4 px-lg-5">Copyright &copy; ThumbTings 2023</div></footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
